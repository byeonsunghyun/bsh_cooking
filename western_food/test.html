<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../css/cooking_main.css">
  <link rel="stylesheet" href="../css/cooking_recipe.css">
  <title>ë‘ë¶€ê¹€ì¹˜ | ë­‰ì¹˜ì˜ ìš”ë¦¬ ë ˆì‹œí”¼</title>
  <link rel="icon" href="../image/icon.png" type="image/png">
</head>
<body>
  <header>
    <a href="../cooking_main" class="logo-link">
      <div class="logo-wrap">
        <img src="../image/title_logo.png" alt="ë¡œê³ " class="logo" />
      </div>
    </a>
  </header>

  <button class="sidebar-toggle-button" onclick="toggleSidebar()">â˜°</button>

  <div class="sidebar" id="sidebar">
    <div class="sidebar-divider"></div>
    <form class="search-container" onsubmit="handleSearch(event)">
      <div class="tag-title2">ğŸ” ê²€ìƒ‰í•˜ê¸°</div>
      <input type="text" name="keyword" placeholder="ì¬ë£Œë‚˜ ìš”ë¦¬ëª…ì„ ì…ë ¥í•´ë³´ì„¸ìš”" />
    </form>
    <div class="recent-recipes">
      <div class="tag-title2">ğŸ•˜ ìµœê·¼ ë³¸ ë ˆì‹œí”¼</div>
      <ul id="recent-recipes-list"></ul>
    </div>
    <div class="spacer"></div>
    <a href="../login" class="sidebar-login-link">ë¡œê·¸ì¸</a>
    <div class="sidebar-divider-below-login"></div>
    <div class="sidebar-social-icons">
      <a href="#" onclick="alert('ğŸ”’'); return false;">
        <img src="../image/instagram.png" alt="Instagram">
      </a>
      <a href="#" onclick="alert('ğŸ”’'); return false;">
        <img src="../image/kakaotalk.png" alt="KakaoTalk">
      </a>
    </div>
  </div>

  <main class="recipe-detail">
    <h1 style="text-align:center;">- ë‘ë¶€ê¹€ì¹˜ -</h1>
    <p class="subtitle">ê³ ì†Œí•œ ë‘ë¶€ì— ë³¶ì€ ê¹€ì¹˜ë¥¼ ê³ë“¤ì—¬ ì¦ê¸°ëŠ” ë‘ë¶€ê¹€ì¹˜!</p>

    <div class="tags" style="justify-content: center; margin-bottom: 24px;">
      <span class="tag time">15ë¶„ ì´ë‚´</span>
      <span class="tag spicy">ë§¤ì½¤í•œ</span>
    </div>

    <div class="recipe-image">
      <img src="../image/dubu_kimchi.jpg" alt="ë‘ë¶€ê¹€ì¹˜" />
    </div>

    <section class="recipe-info">
      <h2>ğŸ“ ì¬ë£Œ</h2>
      <ul>
        <li>ë‘ë¶€</li>
<li>ëŒ€íŒ¨ì‚¼ê²¹ì‚´ í•œ ì¤Œ</li>
<li>ëŒ€íŒŒ í•œ ì¤Œ</li>
<li>ì–‘íŒŒ 1/4</li>
<li>ë¬µì€ì§€ 200g</li>
<li>ë‹¤ì§„ë§ˆëŠ˜ 1í°ìˆ </li>
<li>ì„¤íƒ• 2í°ìˆ </li>
<li>ê³ ì¶§ê°€ë£¨ 4í°ìˆ </li>
<li>ì§„ê°„ì¥ 2í°ìˆ </li>
<li>ë¬¼ 100ml</li>
<li>ì‹ìš©ìœ </li>
<li>ì²­ì–‘ê³ ì¶”</li>
<li>ì°¸ê¹¨</li>
      </ul>
    </section>

    <section class="recipe-steps">
      <h2>ğŸ³ ë§Œë“œëŠ” ë²•</h2>
      <ol>
        <li>íŒ¬ì— ì‹ìš©ìœ ë¥¼ ë‘ë¥´ê³  ì²­ì–‘ê³ ì¶”ì™€ ë¬¼ì„ ì œì™¸í•œ ëª¨ë“  ì¬ë£Œë¥¼ ë„£ì–´ ë³¶ìŠµë‹ˆë‹¤.</li>
<li>ì¬ë£Œê°€ ì¶©ë¶„íˆ ë³¶ì•„ì§€ë©´ ì²­ì–‘ê³ ì¶”ì™€ ë¬¼ì„ ë„£ê³ </li>
<li>ë¬¼ì´ ì¡¸ì•„ë“¤ ë•Œê¹Œì§€ ì¡°ë ¤ì¤ë‹ˆë‹¤.</li>
<li>ë“ëŠ” ë¬¼ì— ë‘ë¶€ë¥¼ 3ë¶„ê°„ ë°ì³ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤.</li>
      </ol>
    </section>

    <section class="tip-box">
      <h2>ğŸ’¡ TIP</h2>
      <p>ê³ ê¸°ëŠ” ê¸°ë¦„ì§„ ë¶€ìœ„ë¥¼ ì‚¬ìš©í•˜ë©´ ë” ë§›ìˆì–´ìš”.</p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Byeon Sung Hyun. All rights reserved.</p>
  </footer>

  <button id="scrollToTopBtn" title="ë§¨ ìœ„ë¡œ ê°€ê¸°">â†‘</button>

	<script>
const scrollBtn = document.getElementById('scrollToTopBtn');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 300) {
      scrollBtn.classList.add('show');
    } else {
      scrollBtn.classList.remove('show');
    }
  });

  scrollBtn.addEventListener('click', () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
	
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('open');
  }

  window.addEventListener('scroll', function () {
    const toggleButton = document.querySelector('.sidebar-toggle-button');
    if (window.scrollY > 10) {
      toggleButton.classList.add('scrolled');
    } else {
      toggleButton.classList.remove('scrolled');
    }
  });

  function handleSearch(event) {
    event.preventDefault();
    alert("ğŸ”§ ê²€ìƒ‰ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤!");
  }

 const basePath = '/bsh_cooking/'; // ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œ ë£¨íŠ¸ ê²½ë¡œ

document.querySelectorAll('.recipe-card').forEach(card => {
  card.addEventListener('click', () => {
    const hrefRaw = card.getAttribute('href');
    const imgRaw = card.querySelector('img')?.getAttribute('src') || '';
    const title = card.parentElement.querySelector('h3')?.innerText || '';

    // ì €ì¥í•  ë•ŒëŠ” ì›ë³¸ ê²½ë¡œ ê·¸ëŒ€ë¡œ ì €ì¥
    const newRecipe = { href: hrefRaw, img: imgRaw, title };

    let recent = JSON.parse(localStorage.getItem('recentRecipes') || '[]');
    recent = recent.filter(r => r.href !== hrefRaw);
    recent.unshift(newRecipe);
    if (recent.length > 10) recent = recent.slice(0, 10);

    localStorage.setItem('recentRecipes', JSON.stringify(recent));
  });
});

function loadRecentRecipes() {
  const container = document.getElementById('recent-recipes-list');
  if (!container) return;

  const recent = JSON.parse(localStorage.getItem('recentRecipes') || '[]');
  container.innerHTML = '';

  if (recent.length === 0) {
    container.innerHTML = '<li class="no-recent">ìµœê·¼ ë³¸ ë ˆì‹œí”¼ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
    return;
  }

  recent.forEach(({ href, img, title }) => {
    // imgê°€ ìƒëŒ€ê²½ë¡œì¼ ê²½ìš° ê¸°ì¤€ ê²½ë¡œ(basePath)ì™€ í•©ì³ì„œ ì ˆëŒ€ê²½ë¡œ ë§Œë“¦
    const imgUrl = img.startsWith('http') ? img : basePath + img.replace(/^(\.\.\/)+/, '');

    const li = document.createElement('li');
    li.innerHTML = `
      <a href="${href}" class="recent-link">
        <img src="${imgUrl}" alt="${title}">
        <span>${title}</span>
      </a>
    `;
    container.appendChild(li);
  });
}

document.addEventListener('DOMContentLoaded', loadRecentRecipes);

</script>
</body>
</html>
