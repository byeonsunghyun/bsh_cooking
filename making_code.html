<!DOCTYPE html>
<html lang="ko">
	<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="./image/icon.png" type="image/png">
	<link rel="stylesheet" href="css/making_source.css">
	<title>ë ˆì‹œí”¼ HTML ìƒì„±ê¸°</title>
	
	</head>
	<body>
		<div class="container">
		<h1>ë ˆì‹œí”¼ HTML ìƒì„±ê¸°</h1>
		
		<form>
		  <label>ìš”ë¦¬ ì´ë¦„:</label>
		  <input type="text" id="name" placeholder="ì˜ˆ: ê¹€ì¹˜ì°Œê°œ">
		
		  <label>ìš”ë¦¬ ì„¤ëª…:</label>
		  <input type="text" id="desc" placeholder="ì˜ˆ: ì–¼í°í•˜ê³  ë§›ìˆëŠ” ì§‘ë°¥ ë ˆì‹œí”¼">
		
		  <label>ìš”ë¦¬ ì‹œê°„:</label>
		  <input type="text" id="time" placeholder="ì˜ˆ: 30ë¶„ ì´ë‚´">
		
		  <label>ìš”ë¦¬ ë§›:</label>
		  <select id="taste" onchange="setTasteCode()">
		    <option value="spicy">ë§¤ì½¤í•œ</option>
		    <option value="sweet">ë‹¬ì½¤í•œ</option>
		    <option value="salty">ì§­ì§¤í•œ</option>
		    <option value="sour">ìƒˆì½¤í•œ</option>
		    <option value="light">ë‹´ë°±í•œ</option>
		    <option value="nutty">ê³ ì†Œí•œ</option>
		    <option value="hot">ì–¼í°í•œ</option>
		  </select>
		
		  <input type="hidden" id="tasteCode">
		
		  <label>ìš”ë¦¬ ì´ë¯¸ì§€ ì´ë¦„:</label>
		  <input type="text" id="img" placeholder="ì˜ˆ: kimchi_stew">
		  
		  <label>ìš”ë¦¬ ì¢…ë¥˜:</label>
		  <input type="text" id="type" placeholder="ì˜ˆ : noodle">
		
		  <label>íŒ:</label>
		  <input type="text" id="tip" placeholder="ì˜ˆ: ë‘ë¶€ëŠ” ë§ˆì§€ë§‰ì— ë„£ì–´ì•¼ ë¶€ì„œì§€ì§€ ì•Šì•„ìš”">
		
		  <label>ì¬ë£Œ (ì‰¼í‘œë¡œ êµ¬ë¶„):</label>
		  <textarea id="ingredients" rows="2" placeholder="ì˜ˆ: ê¹€ì¹˜ 300g, ë¼ì§€ê³ ê¸° 300g, ë‘ë¶€ 100g"></textarea>
		
		  <label>ìš”ë¦¬ ë°©ë²• (ì‰¼í‘œë¡œ êµ¬ë¶„):</label>
		  <textarea id="steps" rows="2" placeholder="ì˜ˆ: ê¹€ì¹˜ ì°ê¸°, ë¼ì§€ê³ ê¸° ë³¶ê¸°, ë“ì´ê¸°"></textarea>
		
		  <button type="button" onclick="generateHTML()">ë ˆì‹œí”¼ HTML ìƒì„±</button>
		  <button type="button" onclick="generateCardHTML()">ë ˆì‹œí”¼ ì¹´ë“œ HTML ìƒì„±</button>
		</form>
		
		<h2>ë ˆì‹œí”¼ HTML ê²°ê³¼</h2>
		<div class="output-container">
		  <button class="copy-btn" onclick="copyToClipboard('output', 'msg1')">ë³µì‚¬í•˜ê¸°</button>
		  <textarea id="output" rows="10"></textarea>
		  <div id="msg1" class="copy-msg">ë ˆì‹œí”¼ HTML ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
		</div>
		
		<h2>ë ˆì‹œí”¼ HTML ê²°ê³¼ (JavaScript)</h2>
		<div class="output-container">
		  <button class="copy-btn" onclick="copyToClipboard('fixedText', 'msg3')">ë³µì‚¬í•˜ê¸°</button>
		  <textarea id="fixedText" rows="10" readonly>
		  <script>
		const scrollBtn = document.getElementById('scrollToTopBtn');
		
		  window.addEventListener('scroll', () => {
		    if (window.scrollY > 300) {
		      scrollBtn.classList.add('show');
		    } else {
		      scrollBtn.classList.remove('show');
		    }
		  });
		
		  scrollBtn.addEventListener('click', () => {
		    window.scrollTo({
		      top: 0,
		      behavior: 'smooth'
		    });
		  });
			
		  function toggleSidebar() {
		    const sidebar = document.getElementById('sidebar');
		    sidebar.classList.toggle('open');
		  }
		
		  window.addEventListener('scroll', function () {
		    const toggleButton = document.querySelector('.sidebar-toggle-button');
		    if (window.scrollY > 10) {
		      toggleButton.classList.add('scrolled');
		    } else {
		      toggleButton.classList.remove('scrolled');
		    }
		  });
		
		  function handleSearch(event) {
		    event.preventDefault();
		    alert("ğŸ”§ ê²€ìƒ‰ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤!");
		  }
		
		 const basePath = '/bsh_cooking/'; // ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œ ë£¨íŠ¸ ê²½ë¡œ
		
		document.querySelectorAll('.recipe-card').forEach(card => {
		  card.addEventListener('click', () => {
		    const hrefRaw = card.getAttribute('href');
		    const imgRaw = card.querySelector('img')?.getAttribute('src') || '';
		    const title = card.parentElement.querySelector('h3')?.innerText || '';
		
		    // ì €ì¥í•  ë•ŒëŠ” ì›ë³¸ ê²½ë¡œ ê·¸ëŒ€ë¡œ ì €ì¥
		    const newRecipe = { href: hrefRaw, img: imgRaw, title };
		
		    let recent = JSON.parse(localStorage.getItem('recentRecipes') || '[]');
		    recent = recent.filter(r => r.href !== hrefRaw);
		    recent.unshift(newRecipe);
		    if (recent.length > 10) recent = recent.slice(0, 10);
		
		    localStorage.setItem('recentRecipes', JSON.stringify(recent));
		  });
		});
		
		function loadRecentRecipes() {
		  const container = document.getElementById('recent-recipes-list');
		  if (!container) return;
		
		  const recent = JSON.parse(localStorage.getItem('recentRecipes') || '[]');
		  container.innerHTML = '';
		
		  if (recent.length === 0) {
		    container.innerHTML = '<li class="no-recent">ìµœê·¼ ë³¸ ë ˆì‹œí”¼ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
		    return;
		  }
		
		  recent.forEach(({ href, img, title }) => {
		    // imgê°€ ìƒëŒ€ê²½ë¡œì¼ ê²½ìš° ê¸°ì¤€ ê²½ë¡œ(basePath)ì™€ í•©ì³ì„œ ì ˆëŒ€ê²½ë¡œ ë§Œë“¦
		    const imgUrl = img.startsWith('http') ? img : basePath + img.replace(/^(\.\.\/)+/, '');
		
		    const li = document.createElement('li');
		    li.innerHTML = `
		      <a href="${href}" class="recent-link">
		        <img src="${imgUrl}" alt="${title}">
		        <span>${title}</span>
		      </a>
		    `;
		    container.appendChild(li);
		  });
		}
		
		document.addEventListener('DOMContentLoaded', loadRecentRecipes);
		
		</script></textarea>
		  <div id="msg3" class="copy-msg">ìŠ¤í¬ë¦½íŠ¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
		</div>
		
		<h2>ë ˆì‹œí”¼ ì¹´ë“œ HTML ê²°ê³¼</h2>
		<div class="output-container">
		  <button class="copy-btn" onclick="copyToClipboard('cardOutput', 'msg2')">ë³µì‚¬í•˜ê¸°</button>
		  <textarea id="cardOutput" rows="10"></textarea>
		  <div id="msg2" class="copy-msg">ë ˆì‹œí”¼ ì¹´ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
		</div>
		</div>
		
		<script>
	function setTasteCode() {
	  const tasteSelect = document.getElementById("taste");
	  const tasteCodeInput = document.getElementById("tasteCode");
	  tasteCodeInput.value = tasteSelect.value;
	}
	
	function copyToClipboard(id, msgId) {
	  const textarea = document.getElementById(id);
	  textarea.select();
	  textarea.setSelectionRange(0, 99999);
	  document.execCommand("copy");
	
	  const msgDiv = document.getElementById(msgId);
	  msgDiv.style.display = "block";
	  setTimeout(() => {
	    msgDiv.style.display = "none";
	  }, 2000);
	}
	
	const template = `<!DOCTYPE html>
	<html lang="ko">
	<head>
	  <meta charset="UTF-8" />
	  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	  <link rel="stylesheet" href="../css/cooking_main.css">
	  <link rel="stylesheet" href="../css/cooking_recipe.css">
	  <title>ìš”ë¦¬ ì´ë¦„ | ë­‰ì¹˜ì˜ ìš”ë¦¬ ë ˆì‹œí”¼</title>
	  <link rel="icon" href="../image/icon.png" type="image/png">
	</head>
	<body>
	  <header>
	    <a href="../cooking_main" class="logo-link">
	      <div class="logo-wrap">
	        <img src="../image/title_logo.png" alt="ë¡œê³ " class="logo" />
	      </div>
	    </a>
	  </header>
	
	  <button class="sidebar-toggle-button" onclick="toggleSidebar()">â˜°</button>
	
	  <div class="sidebar" id="sidebar">
	    <div class="sidebar-divider"></div>
	    <form class="search-container" onsubmit="handleSearch(event)">
	      <div class="tag-title2">ğŸ” ê²€ìƒ‰í•˜ê¸°</div>
	      <input type="text" name="keyword" placeholder="ì¬ë£Œë‚˜ ìš”ë¦¬ëª…ì„ ì…ë ¥í•´ë³´ì„¸ìš”" />
	    </form>
	    <div class="recent-recipes">
	      <div class="tag-title2">ğŸ•˜ ìµœê·¼ ë³¸ ë ˆì‹œí”¼</div>
	      <ul id="recent-recipes-list"></ul>
	    </div>
	    <div class="spacer"></div>
	    <a href="../login" class="sidebar-login-link">ë¡œê·¸ì¸</a>
	    <div class="sidebar-divider-below-login"></div>
	    <div class="sidebar-social-icons">
	      <a href="#" onclick="alert('ğŸ”’'); return false;">
	        <img src="../image/instagram.png" alt="Instagram">
	      </a>
	      <a href="#" onclick="alert('ğŸ”’'); return false;">
	        <img src="../image/kakaotalk.png" alt="KakaoTalk">
	      </a>
	      <a href="https://byeonsunghyun.github.io/bsh_hub/bshhub">
		    <img src="image/hub_logo_bg.png" alt="BshHub">
		  </a>
	    </div>
	  </div>
	
	  <main class="recipe-detail">
	    <h1 style="text-align:center;">- ìš”ë¦¬ ì´ë¦„ -</h1>
	    <p class="subtitle">ìš”ë¦¬ ì„¤ëª…</p>
	
	    <div class="tags" style="justify-content: center; margin-bottom: 24px;">
	      <span class="tag time">ìš”ë¦¬ ì‹œê°„</span>
	      <span class="tag tasteCode">ìš”ë¦¬ ë§›</span>
	    </div>
	
	    <div class="recipe-image">
	      <img src="../image/ìš”ë¦¬ ì´ë¯¸ì§€ ì´ë¦„.jpg" alt="ìš”ë¦¬ ì´ë¦„" />
	    </div>
	
	    <section class="recipe-info">
	      <h2>ğŸ“ ì¬ë£Œ</h2>
	      <ul>
	        ì¬ë£Œë¦¬ìŠ¤íŠ¸
	      </ul>
	    </section>
	
	    <section class="recipe-steps">
	      <h2>ğŸ³ ë§Œë“œëŠ” ë²•</h2>
	      <ol>
	        ìš”ë¦¬ë°©ë²•ë¦¬ìŠ¤íŠ¸
	      </ol>
	    </section>
	
	    <section class="tip-box">
	      <h2>ğŸ’¡ TIP</h2>
	      <p>íŒ</p>
	    </section>
	  </main>
	
	  <footer>
	    <p>&copy; 2025 Byeon Sung Hyun. All rights reserved.</p>
	  </footer>
	
	  <button id="scrollToTopBtn" title="ë§¨ ìœ„ë¡œ ê°€ê¸°">â†‘</button>
	</body>
	</html>
	`;
	
	const cardTemplate = `
	<div class="recipe-wrapper">
	  <a href="/bsh_cooking/recipe_html/ìš”ë¦¬ ì´ë¯¸ì§€ ì´ë¦„" class="recipe-card">
	    <div class="image-wrap">
	      <img src="./image/ìš”ë¦¬ ì´ë¯¸ì§€ ì´ë¦„.jpg" onerror="this.onerror=null; this.src='./image/ready.png';" alt="ìš”ë¦¬ ì´ë¦„" />
	    </div>
	  </a>
	  <div class="recipe-text">
	    <h3>ìš”ë¦¬ ì´ë¦„</h3>
	    <p>ìš”ë¦¬ ì„¤ëª…</p>
	    <div class="tags">
	      <span class="tag time">ìš”ë¦¬ ì‹œê°„</span>
	      <span class="tag tasteCode">ìš”ë¦¬ ë§›</span>
	    </div>
		<div class="ingredients" style="display: none;">
	    ì¬ë£Œ
	  </div>
	    <div class="category" style="display: none;">ì¢…ë¥˜</div>
	  </div>
	</div>
	`;
	
	function generateHTML() {
	  let html = template;
	
	  const tasteSelect = document.getElementById("taste");
	
	  const data = {
	    "ìš”ë¦¬ ì´ë¦„": document.getElementById("name").value,
	    "ìš”ë¦¬ ì„¤ëª…": document.getElementById("desc").value,
	    "ìš”ë¦¬ ì‹œê°„": document.getElementById("time").value,
	    "tasteCode": tasteSelect.value,
	    "ìš”ë¦¬ ë§›": tasteSelect.options[tasteSelect.selectedIndex].text,
	    "ìš”ë¦¬ ì´ë¯¸ì§€ ì´ë¦„": document.getElementById("img").value,
	    "íŒ": document.getElementById("tip").value
	  };
	
	  for (const key in data) {
	    const regex = new RegExp(key, "g");
	    html = html.replace(regex, data[key]);
	  }
	
	  const ingredients = document.getElementById("ingredients").value
	    .split(",").map(s => `<li>${s.trim()}</li>`).join("\n");
	  html = html.replace("ì¬ë£Œë¦¬ìŠ¤íŠ¸", ingredients);
	
	  const steps = document.getElementById("steps").value
	    .split(",").map(s => `<li>${s.trim()}</li>`).join("\n");
	  html = html.replace("ìš”ë¦¬ë°©ë²•ë¦¬ìŠ¤íŠ¸", steps);
	
	  document.getElementById("output").value = html;
	}

	function generateCardHTML() {
	  let cardHTML = cardTemplate;
	
	  const tasteSelect = document.getElementById("taste");
	  const ingredients = document.getElementById("ingredients").value;
	
	  const data = {
	    "ìš”ë¦¬ ì´ë¦„": document.getElementById("name").value,
	    "ìš”ë¦¬ ì„¤ëª…": document.getElementById("desc").value,
	    "ìš”ë¦¬ ì‹œê°„": document.getElementById("time").value,
	    "ì¢…ë¥˜" : document.getElementById("type").value,
	    "tasteCode": tasteSelect.value, // classìš©
	    "ìš”ë¦¬ ë§›": tasteSelect.options[tasteSelect.selectedIndex].text, // span ë‚´ìš©ìš©
	    "ìš”ë¦¬ ì´ë¯¸ì§€ ì´ë¦„": document.getElementById("img").value,
	    "ì¬ë£Œ": ingredients // ì¬ë£Œ ì¶”ê°€
	  };
	
	  for (const key in data) {
	    const regex = new RegExp(key, "g");
	    cardHTML = cardHTML.replace(regex, data[key]);
	  }
	
	  document.getElementById("cardOutput").value = cardHTML;
	}
	</script>
	</body>
</html>
